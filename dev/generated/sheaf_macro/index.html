<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>- · AlgebraicOptimization.jl</title><meta name="title" content="- · AlgebraicOptimization.jl"/><meta property="og:title" content="- · AlgebraicOptimization.jl"/><meta property="twitter:title" content="- · AlgebraicOptimization.jl"/><meta name="description" content="Documentation for AlgebraicOptimization.jl."/><meta property="og:description" content="Documentation for AlgebraicOptimization.jl."/><meta property="twitter:description" content="Documentation for AlgebraicOptimization.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">AlgebraicOptimization.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">AlgebraicOptimization.jl</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../flocking_example/">Flocking Example</a></li><li><a class="tocitem" href="../consensus_example/">Consensus Example</a></li><li><a class="tocitem" href="../moving_formation_example/">Moving Formation Example</a></li></ul></li><li><span class="tocitem">Cellular Sheaf Macro</span><ul><li class="is-active"><a class="tocitem" href>-</a><ul class="internal"><li><a class="tocitem" href="#Cellular-Sheaf-DSL"><span>Cellular Sheaf DSL</span></a></li></ul></li></ul></li><li><a class="tocitem" href="../../api/">Library Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Cellular Sheaf Macro</a></li><li class="is-active"><a href>-</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>-</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/AlgebraicJulia/AlgebraicOptimization.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/AlgebraicJulia/AlgebraicOptimization.jl/blob/main/docs/literate/sheaf_macro.jl" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h2 id="Cellular-Sheaf-DSL"><a class="docs-heading-anchor" href="#Cellular-Sheaf-DSL">Cellular Sheaf DSL</a><a id="Cellular-Sheaf-DSL-1"></a><a class="docs-heading-anchor-permalink" href="#Cellular-Sheaf-DSL" title="Permalink"></a></h2><p>Here, we will illustrate how to create a cellular sheaf with the <code>@cellular_sheaf</code> macro.</p><h3 id="Introduction"><a class="docs-heading-anchor" href="#Introduction">Introduction</a><a id="Introduction-1"></a><a class="docs-heading-anchor-permalink" href="#Introduction" title="Permalink"></a></h3><p>The Cellular Sheaf macro allows users to construct a cellular sheaf object. This implies that we can create a graph structure <code>G(V,E)</code> where V = Vertices and E = Edges in the graph &quot;G&quot;. Then we can create a sheaf object on top of this graph where we can denote the following:</p><ul><li>Vertex Stalks and their respective dimensions.</li><li>Edge Stalks and their respective dimensions.</li><li>Restriction Maps defined by matrices.</li></ul><h3 id="Key-Components"><a class="docs-heading-anchor" href="#Key-Components">Key Components</a><a id="Key-Components-1"></a><a class="docs-heading-anchor-permalink" href="#Key-Components" title="Permalink"></a></h3><p>The Cellular Sheaf macro allows a user to declare the following:</p><ul><li><strong>Restriction Maps:</strong> A user can define numerous restriction maps outside of the embedded DSL. Restriction maps are defined as Julia matrices:</li></ul><pre><code class="nohighlight hljs"> - ```A = [1 0 0; 0 0 1]```</code></pre><ul><li><strong>Vertex Stalks:</strong> A user can define numerous vertex stalks by declaring a variable a <code>Stalk</code> type in their variable declarations. To complete a <code>Stalk</code> type, the user must also specify the dimension of the given vector space. This can be done by specifying a digit within brackets after the type annotation:</li></ul><pre><code class="nohighlight hljs"> - ```Stalk{1}``` where ```1``` specifies the dimension of the vector space.
- To complete your vertex stalk, assign your typing to a variable name of choice such as ```vertex_name::Stalk{1}```.</code></pre><ul><li><strong>Graph Edges:</strong> Now that we have declared our restriction maps and our vertex stalks, what can we do with them? We can declare a system of linear equations that represents the relationships or edges between vertices.</li></ul><pre><code class="nohighlight hljs">-  Let us say we are given restriction maps: A and B. Additionally, we are given vertex stalks x and y. We want to create an edge between x and y where the two incident vertices share an edge stalk vector space. We will need to map our given vertex stalks into the edge stalk vector space through our restriction maps: A and B. Given that A maps x to the shared edge space and B maps y to the shared edge space, we yield the following relation:
	- ```A(x) == B(y)```: This declares an edge with incident vertex stalks x and y where A maps x to the shared edge space and B maps y to the shared edge space.</code></pre><h3 id="Putting-It-All-Together"><a class="docs-heading-anchor" href="#Putting-It-All-Together">Putting It All Together</a><a id="Putting-It-All-Together-1"></a><a class="docs-heading-anchor-permalink" href="#Putting-It-All-Together" title="Permalink"></a></h3><p>Now that we understand the different components of building a cellular sheaf within our DSL, let&#39;s create our very own cellular sheaf.</p><p>First, let&#39;s import necessary modules:</p><pre><code class="language-julia hljs">using AlgebraicOptimization</code></pre><h4 id="Triangular-Sheaf"><a class="docs-heading-anchor" href="#Triangular-Sheaf">Triangular Sheaf</a><a id="Triangular-Sheaf-1"></a><a class="docs-heading-anchor-permalink" href="#Triangular-Sheaf" title="Permalink"></a></h4><p>Given the following graph: <code>G(V, E)</code> where:</p><ul><li><code>V = {x, y, z}</code></li><li><code>E = {[x -&gt; y], [x -&gt; z], [y -&gt; z]}</code></li></ul><p>We aim to create a cellular sheaf where x, y, and z are vertex stalks of dimension 4.</p><p>Furthermore, we want to establish each edge stalk with a dimension of 1. To map our vertex stalk to our edge stalk, we will need a 1 x 4 matrix for each. We can define these as A, B, C with arbitrary values since we are more concerned with the relationships than the information in this guide. The information such as feature vectors and mappings are up to the end user.</p><p>To create the restriction maps, we create Julia matrices as we normally would:</p><pre><code class="language-julia hljs">A = [1 0 0 0]
B = [1 0 0 0]
C = [1 0 0 0]</code></pre><p>We can then pass these values into our macro as arguments as follows:</p><pre><code class="language-julia hljs">sheaf = @cellular_sheaf A, B, C begin end</code></pre><p>This will essentially declare these restriction maps within our cellular sheaf.</p><p>Now, let&#39;s declare our vertex stalks and their respective dimensions. We stated that we want to declare vertex stalks of dimension 4. We can do so within our macro scope as follows:</p><pre><code class="language-julia hljs">sheaf = @cellular_sheaf A, B, C begin
  x::Stalk{4}, y::Stalk{4}, z::Stalk{4}
end</code></pre><p>Great, now we want to declare our edges in the graph as well as our relationship between our restriction maps and vertex stalks. We can do this using the relationship structure illustrated earlier:</p><pre><code class="language-julia hljs">sheaf = @cellular_sheaf A, B, C begin
    x::Stalk{4}, y::Stalk{4}, z::Stalk{4}
    A(x) == B(y)
    A(x) == C(z)
    B(y) == C(z)
end</code></pre><p>This establishes three edges within our graph.</p><ul><li>An edge from x to y with restriction maps A and B.</li><li>An edge from x to z with restriction maps A and C.</li><li>An edge from y to z with restriction maps B and C.</li></ul><p>To conclude, a complete triangular cellular sheaf would look as follows:</p><pre><code class="language-julia hljs">A = [1 0 1 0]
B = [1 0 0 1]
C = [1 0 0 0]

macro_result = @cellular_sheaf A, B, C begin
    x::Stalk{4}, y::Stalk{4}, z::Stalk{4}

    A(x) == B(y)
    A(x) == C(z)
    B(y) == C(z)

end</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">CellularSheaf([4, 4, 4], [1, 1, 1], [1.0 0.0 … 0.0 0.0; 1.0 0.0 … 0.0 0.0; 0.0 0.0 … 0.0 0.0])</code></pre><p>This translates to these lower-level functions:</p><pre><code class="language-julia hljs">sheaf = CellularSheaf([4, 4, 4], [1, 1, 1])
set_edge_maps!(sheaf, 1, 2, 1, A, B)
set_edge_maps!(sheaf, 1, 3, 2, A, C)
set_edge_maps!(sheaf, 2, 3, 3, B, C)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">1×4 Matrix{Int64}:
 -1  0  0  0</code></pre><p>which generates this sheaf object:</p><pre><code class="language-julia hljs">sheaf</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">CellularSheaf([4, 4, 4], [1, 1, 1], [1.0 0.0 … 0.0 0.0; 1.0 0.0 … 0.0 0.0; 0.0 0.0 … 0.0 0.0])</code></pre><p><strong>Inferred Edge Stalks:</strong> You may be wondering what happened to declaring edge stalks? Because restriction maps and vertex stalks are enough to infer the edge stalks dimensions, the end user does not need to worry about declaring edge stalks. They can focus on solely restriction maps and vertex stalks, minimizing potential errors form wrongly defined edge stalk dimensions.</p><h3 id="Potential-Exceptions"><a class="docs-heading-anchor" href="#Potential-Exceptions">Potential Exceptions</a><a id="Potential-Exceptions-1"></a><a class="docs-heading-anchor-permalink" href="#Potential-Exceptions" title="Permalink"></a></h3><ol><li><code>&quot;No restriction maps were passed into the macro.&quot;</code></li></ol><pre><code class="nohighlight hljs">- The macro expects at least one restriction map input. This error implies you are trying to create a cellular sheaf with zero restriction maps.</code></pre><ol><li><code>&quot;Restriction map ... is not a matrix&quot;</code></li></ol><pre><code class="nohighlight hljs">- The macro expects the inputted restriction map to be a matrix. This error will throw when you attempt to pass in a restriction map that is not a matrix.</code></pre><ol><li><code>&quot;Variable declaration: ... format is invalid&quot;</code></li></ol><pre><code class="nohighlight hljs">- Indicates that the inputted declaration did not match expected declaration format.</code></pre><ol><li><code>&quot;Term ... is an invalid product. A product is of form A*x or A(x).&quot;</code></li></ol><pre><code class="nohighlight hljs">-  Indicates the LHS or RHS of the equation was not a valid product or function of restriction map and vertex stalk.</code></pre><ol><li><code>&quot;Line is malformed&quot;</code></li></ol><pre><code class="nohighlight hljs">- This is a more general parsing error stating that your inputted line of code did not parse as a declaration or an equation.</code></pre><ol><li><code>&quot;Variable type ... is unsupported. Current types include: &quot;Stalk&quot; (Vertex Stalk).&quot;</code></li></ol><pre><code class="nohighlight hljs">- Indicates you attempted to declare a variable with an undefined type.</code></pre><ol><li><code>&quot;Variable: ... has already been declared.&quot;</code></li></ol><pre><code class="nohighlight hljs">- Indicates you are attempting to redeclare a variable. This is not allowed.</code></pre><ol><li><code>&quot;Inferred edge stalk on relation: Ax = By&quot; is inconsistent. Left restriction map maps dimension ... to dimension ... . Right restriction map maps dimension ... to dimension ... .&quot;</code></li></ol><pre><code class="nohighlight hljs">- Indicates that the there is no possible edge stalk value to be inferred based on the restriction map and vertex values you declared.</code></pre><ol><li><code>&quot;Left/Right restriction map (Size: ...) cannot map left/right vertex stalk (Dimension: ...).&quot;</code></li></ol><pre><code class="nohighlight hljs">- Implies the restriction map vector space and vertex stalk vector space can not be multiplied.</code></pre><ol><li><code>&quot;Restriction map &quot;...&quot; in &quot;, Ax = By&quot; is undefined.&quot;</code></li></ol><pre><code class="nohighlight hljs">- The restriction map used in the given equation was never declared.</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../moving_formation_example/">« Moving Formation Example</a><a class="docs-footer-nextpage" href="../../api/">Library Reference »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.10.2 on <span class="colophon-date" title="Monday 5 May 2025 16:51">Monday 5 May 2025</span>. Using Julia version 1.11.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
